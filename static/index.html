<!-- static/index.html -->
<html>
  <head>
    <script>
      async function captureImage() {
        const video = document.createElement('video');
        video.style.display = 'none';
        document.body.appendChild(video);
        const stream = await navigator.mediaDevices.getUserMedia({
          video: true,
        });
        video.srcObject = stream;
        await video.play();

        // Draw video frame to canvas and return as data URL
        const canvas = document.createElement('canvas');
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        canvas.getContext('2d').drawImage(video, 0, 0);
        stream.getVideoTracks()[0].stop();
        video.remove();
        return canvas.toDataURL('image/jpeg', 0.8);
      }
    </script>
  </head>
  <body></body>
</html>
